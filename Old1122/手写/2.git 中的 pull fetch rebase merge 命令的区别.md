---
theme: devui-blue
---

# git 中的 pull fetch rebase merge 命令的区别

## 1. git pull 和 git fetch 的区别

这两个命令都可以从远程获取最新版本文件到本地。

- git pull：拉取。即从远程仓库拉取最新版本文件到本地，自动合并/merge。
- git fetch：抓取，获取。即从远程获取最新版本文件到本地，不自动合并/merge。

`git pull 和 git fetch命令演示：`

```shell
# 1. 拉取远程的 master 分支，然后合并到当前分支。
git pull origin master

# 2.1 拉取远程的 master 分支，拉取的信息存储在了 ./git/FETCH_HEAD ;
git fetch origin master
# 2.2 将拉取的信息合并到当前分支
git merge FETCH_HEAD
```

上述的两种命令，实现的功能是一样的。`pull` 相当于结合了 `fetch` 和 `merge`。单独的 `fetch` ，可以用来先对比差异，再决定是否需要合并。

`对比差异：`

```shell
# 假如我开发了一个新功能在 a 分支上，我想将 a 分支合并到我们的 master 分支上。

# 可以先拉取远程的 a 分支到本地的 local-a 分支上。
git fetch origin a:local-a

# 对比 master 和 local-a 有何差异，再考虑是否合并。
git diff master local-a

# 切换到 master； 然后将 local-a 合并到 master
git checkout master
git merge local-a
```

`实际效果截图：`
![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5b15714cd1894618b54ed52e871e8bdc~tplv-k3u1fbpfcp-watermark.image?)

## 2. git rebase 和 git merge 的区别

由上述的逻辑，我们可以了解到，`git pull` 可以理解为 `git fetch + git merge`。

即 `git pull` 默认使用的是 merge 模式，如果 `git pull` 加一个参数，即 `git pull -rebase`

那么表示使用 `git rebase` 合并。

`git merge` 和 `git rebase` 都能达到合并分支的效果，但是 git 记录树上稍有不同。

> - rebase 重定
> - merge 合并

### 2.1 场景描述

假设我们有一个主干分支 msater，从 master 切出一个分支：feature-demo， 用来开发新功能。

我们 feature-demo 中的新功能开发完毕了，想要将新功能合并到 master。

此时 master 更新了一些 commit。

> 可以在 VsCode 中下载一个 插件 `git graph` 可以查看我们的 git 树。

#### 2.1.1 如果使用 git merge 方式合并 feature-demo 到 master：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/22549ceb91e940829be73a6aeb7a3e90~tplv-k3u1fbpfcp-watermark.image?)

> - 可以看到上述的截图，会创建一个新的 commit。用来存储合并的记录。

#### 2.1.2 如果使用 git rebase 方式合并 feature-demo 到 master：

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/25b64df4230c4b12a8afbe1b942a0eb7~tplv-k3u1fbpfcp-watermark.image?)

> - 可以看到上述的截图，不会创建一个新的 commit。
> - 两个分支线路会合并到一个线路。

### 2.2 遇到冲突的解决办法

merge 操作遇到冲突的时候，当前 merge 不能继续进行下去。手动修改冲突内容后，add 修改，commit 本地提交，之后再 push 到远程，

rebase  操作遇到冲突的时候，会中断 rebase，同时会提示去解决冲突。解决冲突后, add 修改，执行`git rebase —continue`  继续操作（会要求写入`comment`），或者`git rebase —skip`忽略冲突，之后 push 到远程。

### 2.3 总结

- git merge 会让 2 个分支的提交按照提交时间进行排序，并且会把最新的 2 个 commit 合并成一个 commit。最后的分支树呈现非线性的结构

- git reabse 将 dev 的当前提交复制到 master 的最新提交之后，会形成一个线性的分支树

## end

- 编写时间 2022/11/21
